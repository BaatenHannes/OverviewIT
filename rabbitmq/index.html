



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.1">
    
    
      
        <title>RabbitMQ - Overview</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.3020aac5.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#rabbitmq" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Overview" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Overview
            </span>
            <span class="md-header-nav__topic">
              RabbitMQ
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="Overview" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Overview
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Theory
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Theory
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href=".." title="Theory" class="md-nav__link">
      Theory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../webhosting/" title="WebHosting" class="md-nav__link">
      WebHosting
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Technology
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Technology
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../mkdocs/" title="MkDocs" class="md-nav__link">
      MkDocs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../git/" title="GIT" class="md-nav__link">
      GIT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../css/" title="CSS" class="md-nav__link">
      CSS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../web_api/" title="REST API" class="md-nav__link">
      REST API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../soap/" title="SOAP" class="md-nav__link">
      SOAP
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        RabbitMQ
      </label>
    
    <a href="./" title="RabbitMQ" class="md-nav__link md-nav__link--active">
      RabbitMQ
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exchanges" title="Exchanges" class="md-nav__link">
    Exchanges
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queues" title="Queues" class="md-nav__link">
    Queues
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consumer" title="Consumer" class="md-nav__link">
    Consumer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acknowledge" title="Acknowledge" class="md-nav__link">
    Acknowledge
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtual-host" title="Virtual Host" class="md-nav__link">
    Virtual Host
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scaling" title="Scaling" class="md-nav__link">
    Scaling
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clustering" title="Clustering" class="md-nav__link">
    Clustering
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rabbitmq-federationshovel" title="RabbitMQ Federation/Shovel" class="md-nav__link">
    RabbitMQ Federation/Shovel
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#read-without-remove" title="Read without remove" class="md-nav__link">
    Read without remove
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#masstransit-command-vs-event" title="MassTransit: Command vs Event" class="md-nav__link">
    MassTransit: Command vs Event
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sql/" title="SQL" class="md-nav__link">
      SQL
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Other
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Other
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../netwerkbeheer/" title="Netwerkbeheer" class="md-nav__link">
      Netwerkbeheer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../linux/" title="Linux" class="md-nav__link">
      Linux
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exchanges" title="Exchanges" class="md-nav__link">
    Exchanges
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queues" title="Queues" class="md-nav__link">
    Queues
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consumer" title="Consumer" class="md-nav__link">
    Consumer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acknowledge" title="Acknowledge" class="md-nav__link">
    Acknowledge
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtual-host" title="Virtual Host" class="md-nav__link">
    Virtual Host
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scaling" title="Scaling" class="md-nav__link">
    Scaling
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clustering" title="Clustering" class="md-nav__link">
    Clustering
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rabbitmq-federationshovel" title="RabbitMQ Federation/Shovel" class="md-nav__link">
    RabbitMQ Federation/Shovel
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#read-without-remove" title="Read without remove" class="md-nav__link">
    Read without remove
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#masstransit-command-vs-event" title="MassTransit: Command vs Event" class="md-nav__link">
    MassTransit: Command vs Event
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="rabbitmq">RabbitMQ</h1>
<h2 id="overview">Overview</h2>
<p>To prevent too many connections from opening, only one connection is opened, and channels are logically divided to run on that one connection.
- one physical connection
- multiple 'logical' connections -&gt; channels</p>
<h3 id="exchanges">Exchanges</h3>
<ul>
<li>Direct -&gt; routing key to a single queue</li>
<li>Fanout -&gt; dispatch to all queues bound to this exchange without routing key</li>
<li>Topic -&gt; routing key with regex like routing</li>
<li>Header</li>
</ul>
<h3 id="queues">Queues</h3>
<ul>
<li>Persistant -&gt; data is kept on restart (stored phyically)</li>
<li>Transient -&gt; data is lost on restart</li>
</ul>
<p>Message TTL: can be declared by developers on publish, or inherited by queue. Default is no end time to live.</p>
<h3 id="consumer">Consumer</h3>
<h3 id="acknowledge">Acknowledge</h3>
<p>How to make sure message is succesfully produced or consumed.</p>
<p>Producer</p>
<ul>
<li>Transaction: callback after commit sending multiple messages</li>
<li>Notification: (on single message)</li>
</ul>
<p>Consumer</p>
<ul>
<li>Manual acknowledge: in code explicit (automatically in MassTransit,, together with retry)</li>
<li>Automatic acknowledge: </li>
</ul>
<h3 id="virtual-host">Virtual Host</h3>
<p>Name - to differentiate between different environments, each with its own credentials.
Virtual hosts for different clients - to seperate different client needs.
Each has its own user, exchanges and queues.</p>
<h3 id="scaling">Scaling</h3>
<h4 id="clustering">Clustering</h4>
<p>Node - installation of rabbitMq. Cluster contains multiple nodes (or installations).
To avoid single point of failure.
Can be automatically or manually build. (join cluster wit cmd)
-&gt; queues (definition) is replicated, data is not automatically replicated. 
-&gt; apply a policy to enforce data replication - mirrored queue
-&gt; data is consumed from one master node</p>
<p>-&gt; load balancer needed as intermediate layer, to shield the producer from referencing mutliple nodes (with ip and port etc).</p>
<p>Good from raising Availability, but lowers Performance.</p>
<h4 id="rabbitmq-federationshovel">RabbitMQ Federation/Shovel</h4>
<p>Federation: possibility to produce to one cluster, but consume from another cluster.
Source and destination cluster.
Federation link between the clusters (queues or exchanges).
Also usefull for linking data between two physical location (for complete disaster failure of one cluster).</p>
<h3 id="read-without-remove">Read without remove</h3>
<p>Negative acknowledge is possible - reads but not removes from queue.</p>
<p>HttpPort: 15672 voor GUI
AMQP-port: 5672</p>
<h3 id="masstransit-command-vs-event">MassTransit: Command vs Event</h3>
<ul>
<li>Command with one consumer</li>
<li>Event with multiple consumers</li>
</ul>
<p>Sending or Publishing will generate an Exchange
Consuming will generate an exchange that is coupled to the publisher exchange together with a queue.</p>
<p>MassTransit consumer - multiple consumers possible without destroying message on ackn. Masstransit will create a general consumer in the background to publish messages to multiple consumers. (Adds a consumer layer.)</p>
<p>Questions:
 - large or small messages</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../soap/" title="SOAP" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                SOAP
              </span>
            </div>
          </a>
        
        
          <a href="../sql/" title="SQL" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                SQL
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.dc02f8ce.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>